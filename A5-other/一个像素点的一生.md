---
typora-copy-images-to: p
---

# Life of a Pixel

## ★资料

**➹：**[前端代码如何通过浏览器演化为屏幕显示的像素](https://zhuanlan.zhihu.com/p/44737615)

**➹：**[Life of a Pixel 2018 - Google 幻灯片](https://docs.google.com/presentation/d/1boPxbgNrTU0ddsc144rcXayGA_WF53k96imRH8Mp34Y/edit#slide=id.p)

## ★临时笔记

1. ![1537757160598](p/1537757160598.png)

   这图给我的第一眼就是，内容经过2次解析，变成了一种可以被渲染引擎渲染解释的数据结构！

2. ![1537774806104](p/1537774806104.png)

   > The DOM serves double duty as both the internal representation of the page, and the API exposed to script for querying or modifying the rendering.
   >
   > The JavaScript engine (V8) exposes DOM web APIs as thin wrappers around the real DOM tree through a system called "bindings".

   **✎：**

   > DOM作为页面的内部表示，以及用于查询或修改渲染的脚本的API都是双重职责。
   >
   > JavaScript引擎（V8）通过一个称为“绑定”的系统将DOM web api暴露在真正的DOM树周围。

   按照我的理解就是，DOM树是Chrome浏览器的内部表现，为什么这么说呢？你可以通过JavaScript所提供的DOM API就能发现这一点！

   把HTML解析成一颗DOM树，这很好地诠释了元素父子间，兄弟间的关系！

## ★最终笔记

### ◇苏格拉底的话

> 未经审视的人生没有价值

**➹：**[为何很多人说“未经审视的人生没有价值”呢？ - 知乎](https://www.zhihu.com/question/19951844)

![1537776108042](p/1537776108042.png)

> The unexamined pixel is not worth rendering
>
> ​	——未经审视的像素不值得渲染

这是原话，**✎：**

> The unexamined life is not worth living

稍微谷歌了一下，发现对这句话的翻译千奇百怪……

**➹：**[苏格拉底曾说：“未经审视的人生不值得过”，如何理解这里的“审视”？ - 知乎](https://www.zhihu.com/question/270551757)

如果我此刻非要理解的话，那就是「你没有思考过自己所做的一切，随波逐流，那么你这一生并不值得过下去！」

### ◇讲什么

![1537777030566](p/1537777030566.png)

> This talk is about how Chrome turns web content into pixels.  The entire process is called "rendering".
>
> We'll describe what we mean by content, and what we mean by pixels, and then we'll explain the magic in between.

> 这个演讲是关于Chrome如何将网页内容变成像素的。这整个过程称之为“渲染”。
>
> 我们会描述内容和像素各自是什么意思，然后我们会解释这两者间的「魔力」。

### ◇以Chrome的哪个版本来讲

> Chrome's architecture is constantly evolving.  This talk connects high-level concepts (which change slowly) to specific classes (which change frequently).
>
> The details are based primarily on what is currently shipping in the canary channel (M69), but a few of the biggest future refactorings are mentioned in passing

> Chrome的架构在不断发展。这篇演讲将高层次的概念(变化缓慢)与特定的阶级(变化频繁)联系起来。
>
> 这里的描述主要是基于目前在金丝雀版本（M69）的阐述，同时也会在演讲中提到一些未来最大的重构



![1537777703486](p/1537777703486.png)

我目前所用的Chrome版本号，**✎：**

![1537778522340](p/1537778522340.png)



### ◇你看到的网页内容

> "Content" is the generic term in Chromium for all of the code inside a webpage or the frontend of a web application.
>
> It's made of text, markup (surrounding the text), styles (defining how markup is rendered), and script (which can modify all of the above dynamically).
>
> There are other kinds of content, which we won't cover here.

「Content」是一个关于网页中或者web应用中前端的所有代码的这么一个通用术语。

它由**文本**、**标记**(围绕文本)、**样式**(定义如何呈现标记)和**脚本**(可以动态地修改上述所有内容)组成。

还有其它类型的内容（如图片、音频、视频、svg等等），我们不会在这里介绍。

![1537778879830](p/1537778879830.png)

图中的「property」让我想起了，**✎：**

> JavaScript 提供了一个内部数据结构，用来描述对象的属性，控制它的行为，比如该属性是否可写、可遍历等等。这个内部数据结构称为“属性描述对象”（attributes object）。每个属性都有自己对应的属性描述对象，保存该属性的一些元信息。

**➹：**[属性描述对象 -- JavaScript 标准参考教程（alpha）](https://javascript.ruanyifeng.com/stdlib/attributes.html)

虽然这是CSS的语法，不过可以这样理解这些属性值，如把red再封装一层。就像是这样，**✎：**

![1537781291608](p/1537781291608.png)

**➹：**[JavaScript 的 this 原理 - 阮一峰的网络日志](http://www.ruanyifeng.com/blog/2018/06/javascript-this.html)

### ◇一张真正的网页

> A real webpage is just thousands of lines of HTML, CSS, and JavaScript delivered in plain text over the network.
>
> There's no notion of compilation or packaging as you might find on other kinds of software platforms - the webpage's source code is the input to the renderer.

一张真正的网页只是成千上万行HTML、CSS和JavaScript以纯文本的形式通过网络传递。

没有编译或打包的概念，你可能会发现在其他类型的软件平台-网页的源代码是渲染器的输入。

![1537800934663](p/1537800934663.png)

**➹：**[纽约时报](https://www.nytimes.com)

以一个浏览器界面去看这张网页，**✎：**

![1537802378446](p/1537802378446.png)

> Architecturally, the "content" namespace in the Chromium C++ codebase is responsible for everything in the red box.
>
> Contrast with tab strip, address bar, navigation buttons, menus, etc. which live outside of "content".
>
> Key to Chrome's security model: rendering happens in a sandboxed process.

在架构上，Chromium c++代码库中的以“content”为命名空间的负责红框中的所有内容，与存在于“content”之外的标签栏、地址栏、导航按钮、菜单等形成对比。

Chrome安全模型的关键在于渲染是在沙箱进程中发生的！你要知道沙箱的标签意味着安全！

![1537803074584](p/1537803074584.png)

没想到连到滚动条都是「content」的一员，也是交由Bink来搞事情！



## ★总结

## ★Q&A

### ①金丝雀？

> **Canary** - daily build，这个是最新且可以用于哪些不怕死的开发者和极客们玩新功能的版本。反正bug和漏洞是很多的，但是新玩意也是很多的。这个经过了一定的测试，但是bug应该还是蛮多的。

**➹：**[Chrome 、Chromium 和 Chrome Canary 这三个版本之间的关系和异同是什么？ - 知乎](https://www.zhihu.com/question/19795356)

### ②WebAssembly？

**➹：**[如何评论浏览器最新的 WebAssembly 字节码技术？ - 知乎](https://www.zhihu.com/question/31415286)

> **WebAssembly**或称**wasm**是一个**实验性**的低阶[程式语言](https://translate.googleusercontent.com/translate_c?depth=1&hl=zh-CN&prev=search&rurl=translate.google.com&sl=zh-TW&sp=nmt4&u=https://zh.wikipedia.org/wiki/%25E7%25A8%258B%25E5%25BC%258F%25E8%25AA%259E%25E8%25A8%2580&xid=17259,15700021,15700124,15700149,15700186,15700191,15700201,15700214&usg=ALkJrhgxwslHV6pmqZaajXsjYf9QAmHa7g) ，应用于[浏览器](https://translate.googleusercontent.com/translate_c?depth=1&hl=zh-CN&prev=search&rurl=translate.google.com&sl=zh-TW&sp=nmt4&u=https://zh.wikipedia.org/wiki/%25E7%2580%258F%25E8%25A6%25BD%25E5%2599%25A8&xid=17259,15700021,15700124,15700149,15700186,15700191,15700201,15700214&usg=ALkJrhjrDryXaSCDwFkYgX49ARM442G19w)内的[客户端](https://translate.googleusercontent.com/translate_c?depth=1&hl=zh-CN&prev=search&rurl=translate.google.com&sl=zh-TW&sp=nmt4&u=https://zh.wikipedia.org/wiki/%25E5%25AE%25A2%25E6%2588%25B6%25E7%25AB%25AF&xid=17259,15700021,15700124,15700149,15700186,15700191,15700201,15700214&usg=ALkJrhhk_8HV2AubcdyBYromseRHeog9JA) 。 WebAssembly是可携式的[抽象语法树](https://translate.googleusercontent.com/translate_c?depth=1&hl=zh-CN&prev=search&rurl=translate.google.com&sl=zh-TW&sp=nmt4&u=https://zh.wikipedia.org/wiki/%25E6%258A%25BD%25E8%25B1%25A1%25E8%25AA%259E%25E6%25B3%2595%25E6%25A8%25B9&xid=17259,15700021,15700124,15700149,15700186,15700191,15700201,15700214&usg=ALkJrhhDo4BxElwXGVx9RigGjZoX4r1WTQ) [[1\]](https://translate.googleusercontent.com/translate_c?depth=1&hl=zh-CN&prev=search&rurl=translate.google.com&sl=zh-TW&sp=nmt4&u=https://zh.wikipedia.org/zh/WebAssembly&xid=17259,15700021,15700124,15700149,15700186,15700191,15700201,15700214&usg=ALkJrhhVaoPDLMCV9ai8w6VwZGKGbD5D5Q#cite_note-1) ，被设计来提供比[JavaScript](https://translate.googleusercontent.com/translate_c?depth=1&hl=zh-CN&prev=search&rurl=translate.google.com&sl=zh-TW&sp=nmt4&u=https://zh.wikipedia.org/wiki/JavaScript&xid=17259,15700021,15700124,15700149,15700186,15700191,15700201,15700214&usg=ALkJrhhMwraKCw5MpGHKkkGEG5DzqNFLsA)更快速的[编译](https://translate.googleusercontent.com/translate_c?depth=1&hl=zh-CN&prev=search&rurl=translate.google.com&sl=zh-TW&sp=nmt4&u=https://zh.wikipedia.org/wiki/%25E7%25BC%2596%25E8%25AF%2591&xid=17259,15700021,15700124,15700149,15700186,15700191,15700201,15700214&usg=ALkJrhj8TxjXHD8i6VODkx4nI5RLeO4NQQ)及执行[[2\]](https://translate.googleusercontent.com/translate_c?depth=1&hl=zh-CN&prev=search&rurl=translate.google.com&sl=zh-TW&sp=nmt4&u=https://zh.wikipedia.org/zh/WebAssembly&xid=17259,15700021,15700124,15700149,15700186,15700191,15700201,15700214&usg=ALkJrhhVaoPDLMCV9ai8w6VwZGKGbD5D5Q#cite_note-github.com-2) 。 WebAssembly将让开发者能运用自己熟悉的程式语言（最初以[C](https://translate.googleusercontent.com/translate_c?depth=1&hl=zh-CN&prev=search&rurl=translate.google.com&sl=zh-TW&sp=nmt4&u=https://zh.wikipedia.org/wiki/C%25E8%25AA%259E%25E8%25A8%2580&xid=17259,15700021,15700124,15700149,15700186,15700191,15700201,15700214&usg=ALkJrhhd3i1T1PcNq_DnbSyA_BdvjJUSfg) / [C++](https://translate.googleusercontent.com/translate_c?depth=1&hl=zh-CN&prev=search&rurl=translate.google.com&sl=zh-TW&sp=nmt4&u=https://zh.wikipedia.org/wiki/C%252B%252B&xid=17259,15700021,15700124,15700149,15700186,15700191,15700201,15700214&usg=ALkJrhi7SFShK4GtqcLyG7xuk4MfLk0D7Q)作为实作目标）编译，再借虚拟机器引擎在浏览器内执行[[3\]](https://translate.googleusercontent.com/translate_c?depth=1&hl=zh-CN&prev=search&rurl=translate.google.com&sl=zh-TW&sp=nmt4&u=https://zh.wikipedia.org/zh/WebAssembly&xid=17259,15700021,15700124,15700149,15700186,15700191,15700201,15700214&usg=ALkJrhhVaoPDLMCV9ai8w6VwZGKGbD5D5Q#cite_note-3) 

**➹：**[WebAssembly - Wikiwand](https://www.wikiwand.com/zh/WebAssembly)

强烈推荐下面这个答案，**✎：**

**➹：**[如何评论浏览器最新的 WebAssembly 字节码技术？ - 罗志宇的回答 - 知乎](https://www.zhihu.com/question/31415286/answer/58022648)

其中提到这么一个技术，**✎：**

> 对于不支持 Web Assembly 的浏览器， 会有一段 Javascript 把 Web Assembly 重新翻译为 Javascript 运行， 这个技术叫 **polyfill**, HTML5 刚出来的时候很常用的一个技术。

**polyfill**：这个技术之前在芳芳视频中讲到过，不过忘记了，在哪儿节课讲的了！

### ③Chromium？

> **Chromium**是Google为发展自家的浏览器[Google Chrome](https://www.wikiwand.com/zh-cn/Google_Chrome)而开启的项目，以[BSD许可协议](https://www.wikiwand.com/zh-cn/BSD%E6%8E%88%E6%AC%8A%E6%A2%9D%E6%AC%BE)等数种许可发行并[开放源代码](https://www.wikiwand.com/zh-cn/%E9%96%8B%E6%94%BE%E5%8E%9F%E5%A7%8B%E7%A2%BC)。Chromium与Google Chrome共享大部分代码和功能，但功能和商标之间有一些细微差别。
>
> Chromium 的更新速度很快，每隔数小时即有新的开发版本发布，每次的更新幅度不一定相同，可能增加新功能，或者单纯修正问题，由于新功能会先在Chromium上测试，等待认证后才会应用在Google Chrome上，所以Chromium相当于Google Chrome的先行版。

**➹：**[Chromium - Wikiwand](https://www.wikiwand.com/zh-cn/Chromium)

看来我还是使用Google Chrome好了！

而且国内与很多浏览器是基于Chromium开发的，如QQ浏览器、UC浏览器、还有前段时间很「火」的红芯浏览器等等……

**➹：**[日常使用，Google Chrome 和 Chromium 二者间如何选择？ - 知乎](https://www.zhihu.com/question/19799660)

**➹：**[基于chromium的浏览器和chrome有什么差距？ - 知乎](https://www.zhihu.com/question/27046250#explore)

**➹：**[主流浏览器内核介绍（前端开发值得了解的浏览器内核历史） - 前端 - 掘金](https://juejin.im/entry/57ff3cea0e3dd90057e5f25e)

Google Chrome的内核可是Blink啊！不要跟chromium搞混了啊！

### ④沙盒？

> 在[计算机安全](https://www.wikiwand.com/zh-hans/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%AE%89%E5%85%A8)领域，**沙盒**（英语：sandbox，又译为**沙箱**）是一种安全机制，为执行中的程式提供的隔离环境。通常是作为一些来源不可信、具破坏力或无法判定程序意图的程序提供实验之用[[1\]](https://www.wikiwand.com/zh-hans/%E6%B2%99%E7%9B%92_(%E9%9B%BB%E8%85%A6%E5%AE%89%E5%85%A8)#citenote1)。
>
> 沙盒通常严格控制其中的程序所能访问的资源，比如，沙盒可以提供[用后即回收](https://www.wikiwand.com/zh-hans/%E5%A1%97%E9%8A%B7%E7%A9%BA%E9%96%93)的磁盘及内存空间。在沙盒中，网络访问、对真实系统的访问、对输入设备的读取通常被禁止或是严格限制。从这个角度来说，沙盒属于[虚拟化](https://www.wikiwand.com/zh-hans/%E8%99%9A%E6%8B%9F%E5%8C%96)的一种。
>
> 沙盒中的所有改动对[操作系统](https://www.wikiwand.com/zh-hans/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F)不会造成任何损失。通常，这种技术被[计算机](https://www.wikiwand.com/zh-hans/%E8%AE%A1%E7%AE%97%E6%9C%BA)技术人员广泛用于测试可能[带毒](https://www.wikiwand.com/zh-hans/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%97%85%E6%AF%92)的程序或是其他的[恶意代码](https://www.wikiwand.com/zh-hans/%E6%81%B6%E6%84%8F%E8%BD%AF%E4%BB%B6)[[2\]](https://www.wikiwand.com/zh-hans/%E6%B2%99%E7%9B%92_(%E9%9B%BB%E8%85%A6%E5%AE%89%E5%85%A8)#citenote2)。

**➹：**[沙盒 (计算机安全)](https://www.wikiwand.com/zh-hans/%E6%B2%99%E7%9B%92_(%E9%9B%BB%E8%85%A6%E5%AE%89%E5%85%A8))



