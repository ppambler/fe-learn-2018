---
typora-copy-images-to: img\01
---

# 编码规范（Code Guide）

## ★引子

准备开始写豆瓣电影轻项目了，而这其中肯定会涉及HTML和CSS的，所以在此之前我想看看之前一直都很想了解的关于HTML和CSS的编码规范！

## ★资料

**➹：** [编码规范 by @mdo](https://codeguide.bootcss.com/)

**➹：**[Code Guide by @mdo](http://codeguide.co/)

## ★是什么？

> Standards for developing flexible, durable（耐用的、持久的）, and sustainable（可持续的） HTML and CSS.

这是一份用于编写灵活、稳定、高质量的 HTML 和 CSS 代码的规范

## ★黄金定律

- 永远遵循同一套编码规范 -- 可以是这里列出的，也可以是你自己总结的。

  > 发现该规范有问题请[issue](https://github.com/mdo/code-guide/issues)下，不管是大问题还是小问题，当然，你认为自己的套路也是可以的，想给大家参考参考，也是可以issue一下的！

- **不管有多少人共同参与同一项目，一定要确保每一行代码都像是同一个人编写的。**（ Every line of code should appear to be written by a single person, no matter the number of contributors.）

## ★HTML

### ◇语法

```html
<!DOCTYPE html>
<html>
  <head>
    <title>Page title</title>
  </head>
  <body>
    <img src="images/company-logo.png" alt="Company">
    <h1 class="hello-world">Hello, world!</h1>
  </body>
</html>
```

1. 用两个空格来代替制表符（tab） -- 这是唯一能保证在所有环境下获得一致展现的方法。
2. 嵌套元素应当缩进一次（即两个空格）。
3. 对于属性的定义，确保全部使用双引号，绝不要使用单引号。
4. 不要在自闭合（self-closing）元素的尾部添加斜线 -- [HTML5 规范](http://dev.w3.org/html5/spec-author-view/syntax.html#syntax-start-tag)中明确说明这是可选的。
5. 不要省略可选的结束标签（closing tag）（例如，`</li>`或 `</body>`）。

> 缩进风格是按一下tab，还是两个空格？不过当你把tab设键置成了两个空格的话，那就用tab好了！（难怪若愚老师上课时所展示的代码是两个空格缩进的，而不像我的是4个空格缩进）
>
> **➹：**[【视频】HBO的喜剧片《硅谷》第三季：空格键 vs Tab键](http://www.techug.com/post/space-vs-tab.html)
>
> 在使用vue的过程中，针对指令，显然它是弄在HTML上作为一个类似属性的存在，所以用的是双引号，而写JavaScript代码时显然用单引号比较好！
>
> 在这个[issue](https://github.com/mdo/code-guide/issues/190)中提到：说什么不要个斜杠，就会导致兼容性特别差，不过现在谁还想着用低版本的浏览器啊，虽然说万维网的宗旨是普适性——万维网上的信息应该能被所有人访问，为此你需要渐进增强，所以就要加斜杆吗？——当竟然HTML5规范提到了，秉持着能省则省的原则，还是不加好了！当然加了也没事
>
> 不省略闭合标签这操作，显然已经是常识了！

### ◇HTML5 doctype

```html
<!DOCTYPE html>
<html>
  <head>
  </head>
</html>
```

为每个 HTML 页面的第一行添加一个简单的标准模式（standard mode）的声明，这样能够确保在每个浏览器中拥有一致的展现。

> 这也是常识，直接用emmet插件就能快速创建一个符合最新标准的HTML5页面了，这样浏览器在解析HTML文档的时候，就会知道这些新出现的HTML5元素是什么鬼东西了
>
> **➹：**[Cheat Sheet](https://docs.emmet.io/cheat-sheet/)
>
> **➹：**[前端开发必备！Emmet使用手册_Emmet 教程_w3cplus](https://www.w3cplus.com/tools/emmet-cheat-sheet.html)

### ◇语言属性

```html
<html lang="en-us">
  <!-- ... -->
</html>
```

根据 HTML5 规范：

> 强烈建议为 html 根元素指定 lang 属性，从而为文档设置正确的语言。这将有助于语音合成工具确定其所应该采用的发音，有助于翻译工具确定其翻译时所应遵守的规则等等。

更多关于 `lang` 属性的知识可以从 [此规范](http://www.w3.org/html/wg/drafts/html/master/semantics.html#the-html-element) 中了解。

这里列出了[语言代码表](http://reference.sitepoint.com/html/lang-codes)。

> 对于中文网站，那就 `zh-Hans`就好了呀！当然，你也可以用 `zh-CN`，[腾讯首页](https://www.qq.com/)就是用这个的！
>
> **➹：**[zh-cn 与 zh-hans 是什么关系、有什么区别？ - 知乎](https://www.zhihu.com/question/21980689)
>
> ps：这个主题涉及国际化……

### ◇IE 兼容模式（IE compatibility mode）

```html
<!--告诉IE浏览器，IE8/9及以后的版本都会以最高版本IE来渲染页面-->
<meta http-equiv="X-UA-Compatible" content="IE=Edge">
```

IE 支持通过特定的 `<meta>` 标签来确定绘制（渲染）当前页面所应该采用的 IE 版本。除非有强烈的特殊需求，否则最好是设置为 **edge mode**，从而通知 IE 采用其所支持的最新的模式。

[阅读这篇 stack overflow 上的文章](http://stackoverflow.com/questions/6771258/whats-the-difference-if-meta-http-equiv-x-ua-compatible-content-ie-edge-e)可以获得更多有用的信息。

> 还是直接照搬腾讯首页好了：
>
> ![1551333717192](img/01/1551333717192.png)
>
> 那我看看小米的：
>
> ![1551333767738](img/01/1551333767738.png)
>
> 有一种姿势很强大：
>
> ```html
> <!--chrome=1表示可以激活Chrome Frame-->
> <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
> ```
>
> Chrome Frame可以让旧版IE浏览器使用Chrome的WebKit渲染引擎处理网页，因此**旧版IE用户可以体验到包括HTML5在内的众多现代网页技术。**
>
> 一些注意事项：
>
> 1. 根据官网定义`X-UA-compatible` 标头不区分大小写；不过，它必须显示在网页中除`title`元素和其他`meta`元素以外的所有其他元素之前。如果不是的话，它不起作用
> 2. `content`的内容如果不写“**IE=**”，将不起作用。
>
> 我们知道了如何使用 `X-UA-Compatible`，但是 `X-UA-Compatible`到底是什么呢？——`X-UA-Compatible`是自从**IE8**新加的一个设置，对于IE8以下的浏览器是不识别的。通过在meta中设置`X-UA-Compatible`的值，可以指定网页的兼容性模式设置。
>
> 注意：在网页中指定的模式优先权高于服务器中(通过**HTTP Header**)所指定的模式。不过关于编码的设置，`Content-Type`的优先级更高，因为浏览器省略了嗅探的步骤，提高了效率，从而忽略了文档内的声明 
>
> **➹：**[[FE] IE兼容性模式X-UA-Compatible - 简书](https://www.jianshu.com/p/11adc0ef158e)

### ◇字符编码

```html
<head>
  <meta charset="UTF-8">
</head>
```

通过显示声明明确字符编码，能够确保浏览器快速并容易的判断页面内容的渲染方式。这样做的好处是，可以**避免在 HTML 中使用字符实体标记（character entity）**，从而全部与文档编码一致（一般采用 UTF-8 编码）。

> 字符实体：
>
> - 告诉我它存在的理由？
>
>   1. 在HTML中对`空格/回车/tab`不敏感, 会把多个`空格/回车/tab`当做一个空格来处理
>   2. 在HTML中有的字符是被HTML**保留**的, 有的HTML字符在HTML中是有**特殊含义**的, 是不能在浏览器中直接显示出来的, 所以这些东西要想显示出来就必须通过「字符实体」才能做到
>
> - 使用？
>
>   ```tex
>   &nbsp; 空格, 一个&nbsp;就是一个空格, 有多少个&nbsp;就有多少个空格
>   &lt; 小于符号 <
>   (less than)
>   &gt; 大于符号 >
>   (greater than)
>   &copy; 版权符号
>   ```
>
>   其它的字符实体：[Character Entity Reference Chart](https://dev.w3.org/html5/html-author/charref)
>
>   当我用了  `<meta charset="UTF-8">`  ，就别想着用 `&lt;a&gt;我是一个链接文本&lt;/a&gt;`这种姿势来标记一个内容？——讲真，为啥字符编码会与字符实体有关联？我不写这个字符编码也不会有问题啊！
>
> - 是什么？
>
>   html字符实体是一个以`“＆”`开始并以分号`（;）`结尾的文本**（“字符串”）**。实体经常被用来显示保留的字符（否则会被解释为html代码）和不可见的字符（如不间断的空格）。还可以使用它们代替难以用标准键盘键入的其他字符。
>
>   
>
> 保留字：
>
> - 一些特殊字符保留在html中使用，这意味着浏览器将解析它们为html代码。例如，如果使用小于（<）符号，则浏览器会将随后的任何文本解释为标记。将这些字符显示为文本，将其替换为相应的字符实体……
>
> **➹：**[HTML 字符实体参考 - 掘金](https://juejin.im/post/5b37639951882574ec30b353)
>
> **➹：**[字符实体 - 简书](https://www.jianshu.com/p/9b407185e46e)
>
> **➹：**[html实体编码问题总结 - zouhao's blog](https://blog.owlsn.com/2016-03-08/html%E5%AE%9E%E4%BD%93%E7%BC%96%E7%A0%81%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93/)

### ◇引入 CSS 和 JavaScript 文件

```html
<!-- External CSS -->
<link rel="stylesheet" href="code-guide.css">

<!-- In-document CSS -->
<style>
  /* ... */
</style>

<!-- JavaScript -->
<script src="code-guide.js"></script>
```

根据 HTML5 规范，在引入 CSS 和 JavaScript 文件时一般不需要指定 `type` 属性，因为 `text/css` 和 `text/javascript`分别是它们的默认值。

#### HTML5 spec links

- [Using link](http://www.w3.org/TR/2011/WD-html5-20110525/semantics.html#the-link-element)
- [Using style](http://www.w3.org/TR/2011/WD-html5-20110525/semantics.html#the-style-element)
- [Using script](http://www.w3.org/TR/2011/WD-html5-20110525/scripting-1.html#the-script-element)

### ◇实用为王

尽量遵循 HTML 标准和语义，但是不要以牺牲实用性为代价。任何时候都要尽量使用最少的标签并保持最小的复杂度。

> 虽然叫你尽量遵循，但是如果不实用的话，那就算了……
>
> 看看能否用伪元素取代这些对内容起到装饰性的标签？
>
> 不要让整个页面看起来很多标签，也不要嵌套好几层……

### ◇属性顺序

```html
<a class="..." id="..." data-toggle="modal" href="#">
  Example link
</a>

<input class="form-control" type="text">

<img src="..." alt="...">
```

HTML 属性应当按照以下给出的顺序依次排列，确保代码的易读性。

- `class`
- `id`, `name`
- `data-*`
- `src`, `for`, `type`, `href`, `value`
- `title`, `alt`
- `role`, `aria-*`

class 用于标识高度可复用组件，因此应该排在首位。而id 用于标识具体组件，应当谨慎使用（例如，页面内的书签），因此排在第二位。

> 在我看来唯有可复用的东西才能算是组件……
>
> 只好记住这些套路了，有时候我也不知道，这样写有啥意义（或许是因为属性的常用程度吧），总之，习惯就好！
>
> 其实一般我都用class搞样式，然后用id搞JavaScript

### ◇布尔（boolean）型属性

```html
//存在即为true，所以禁用这个输入框，如果不存在此属性，那么就是false啦，所以可以输入
<input type="text" disabled>

<input type="checkbox" value="1" checked>

<select>
  <option value="1" selected>1</option>
</select>
```

布尔型属性可以在声明时不赋值。XHTML 规范要求为其赋值，但是 HTML5 规范不需要。

更多信息请参考 [WhatWG section on boolean attributes](http://www.whatwg.org/specs/web-apps/current-work/multipage/common-microsyntaxes.html#boolean-attributes)：

> 元素上存在布尔属性就表示真值，同理，缺少属性就表示false值啦

如果*一定*要为其赋值的话，请参考 WhatWG 规范：

> 如果属性存在，其值必须是空字符串或 [...] 属性的规范名称，并且不要在首尾添加空白符。

**简单来说，就是不用赋值。**

> 这个东西在vue中关于对表单的处理经常会遇到，类似于这样 ` :checked="checked"`

### ◇减少标签的数量

编写 HTML 代码时，尽量避免多余的父元素。很多时候，这需要迭代和重构来实现，但产生的HTML更少。请看下面的案例：

```html
<!-- Not so great -->
<span class="avatar">
  <img src="...">
</span>

<!-- Better -->
<img class="avatar" src="...">
```

> 所以不要画蛇添足！不过一开始你是无法预料的你是否真得不需要父元素的，尤其是当你在写CSS和JavaScript的时候，为了更方便一点，你不得不搞点父元素……总之，HTML存在重构的可能，所以别想着一次就写好，这得跟CSS和JavaScript商量好，当然，如果自己的水平高一点，真得是可以避免多余的父元素，所以你只要有这样的意识就好了，即能不用父元素尽量不用父元素……



